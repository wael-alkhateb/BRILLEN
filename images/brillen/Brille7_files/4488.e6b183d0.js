!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="505ce54e-fa4b-47a2-82ae-ca89d98e3c76",e._sentryDebugIdIdentifier="sentry-dbid-505ce54e-fa4b-47a2-82ae-ca89d98e3c76")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"00366d72d657503f9ceb4d0bb693214f7c8f4f83"},(self.webpackChunk=self.webpackChunk||[]).push([[4488],{87287:function(e,t,o){o.r(t)},58141:function(e,t){function o(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});class s{static getInstance(e){return s.instance||(s.instance={}),s.instance[e]||(s.instance[e]=new s(e)),s.instance[e]}getRawValue(){return this.getFromLS()}setRawValue(e){localStorage.setItem(this._localStorageKey,e)}getListValues(){try{let e=this.getFromLS();return e?JSON.parse(e):[]}catch(e){return[]}}existInCollection(e){return this.collectionData.includes(e)}addToCollection(e){let t=this.collectionData;this.existInCollection(e)||(t.push(e),this.collectionData=t),this.setInLS()}replaceCollection(e){e.length>0&&(this.collectionData=e,this.setInLS())}resetCollection(){this.collectionData=[],this.removeFromLS()}removeFromCollection(e,t){let o=JSON.stringify(e);this.collectionData=this._collectionData.filter((s=>t?t(e,s):JSON.stringify(s)!==o)),this.setInLS()}isEmpty(){return 0===this.collectionData.length}get collectionData(){return this._collectionData}set collectionData(e){this._collectionData=e}constructor(e){o(this,"_localStorageKey",void 0),o(this,"_collectionData",void 0),o(this,"getFromLS",(()=>localStorage.getItem(this._localStorageKey))),o(this,"removeFromLS",(()=>localStorage.removeItem(this._localStorageKey))),o(this,"setInLS",(()=>localStorage.setItem(this._localStorageKey,JSON.stringify(this._collectionData)))),this._localStorageKey=e,this._collectionData=this.getListValues()}}o(s,"instance",void 0)},71001:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});const s=o(80487),n=()=>{(0,s.qsa)(".jse-wishlist-item").forEach((e=>{if(!(0,s.qs)("span.js-special-price",e))return;let t=(0,s.sqs)(".jss-regular-price-amount",e).innerText,o=(0,s.sqs)("span.js-special-price-amount",e).innerText,n=parseFloat(t.split(",").join(".")),r=parseFloat(o.split(",").join("."));(0,s.sqs)(".jse-sale-circle span",e).innerText=`${Math.round((n-r)/n*100)}`,(0,s.sqs)(".jse-sale-circle",e).style.display="block"}))}},39634:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});const s=o(39281),n=o(80487),r=l(o(58141)),a=l(o(55181)),i=l(o(25926));function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e){return e&&e.__esModule?e:{default:e}}class d{addProduct(e,t){4!==this.localStorage.collectionData.length?this.client.addProduct(e).then((async o=>{this.updateCount(o.countItems,o.countHto),this.localStorage.addToCollection(e),4===this.localStorage.collectionData.length&&this.getHtoProducts(),this.updateIcons(t,"add")})).catch((e=>{this.updateIcons(t,"remove"),console.error(e)})):this.getHtoProducts(t)}getHtoProducts(e=null){this.client.getRenderedProductList(this.localStorage.collectionData).then((t=>{this.showHtoProducts(t),e&&this.updateIcons(e,"remove")}))}InitializeOffCanvas(){if((0,n.qs)(".js-hto-products-content"))return;let e=(0,n.createElement)("div",["hto-products-content","js-hto-products-content","overlay-page__offcanvas-content"]),t=(0,n.createElement)("button","js-hto-products-button");document.body.appendChild(t),document.body.appendChild(e),this.offCanvasScreen=new a.default(e,{openerElement:t,closableByOverlay:!0})}showHtoProducts(e){null!==(0,n.qs)(".js-hto-products-content")&&((0,n.sqs)(".js-hto-products-content").innerHTML=e,(0,n.sqs)(".js-hto-products-button").click())}removeProduct(e,t){this.client.removeProduct(e).then((async o=>{this.updateCount(o.countItems,o.countHto),this.localStorage.removeFromCollection(e),this.updateIcons(t,"remove")})).catch((e=>{this.updateIcons(t,"add"),console.log(e)}))}updateIcons(e,t){this.toggleButtonState(e,t),e.classList.remove("jss-is-loading"),this.isListing||(0,n.showDOMElement)((0,n.sqs)(".js-hto-icon",e),"inline"),(0,n.hideDOMElement)((0,n.sqs)(".js-hto-loader",e))}toggleButtonState(e,t){if("add"===t)(0,n.qsa)(`.jse-hto-action-btn[data-product-code="${e.dataset.productCode}"]`).forEach((e=>{this.replaceHTOButton(e,"remove")}));else{if("remove"!==t)throw Error("Unknown action");(0,n.qsa)(`.jse-hto-action-btn[data-product-code="${e.dataset.productCode}"]`).forEach((e=>{this.replaceHTOButton(e,"add")}))}}updateCount(e,t){(0,n.qsa)(".js-cart-counter").forEach((o=>{o.dataset.count&&(0,n.updateCount)(o,e+t)}))}updateHTOButtons(){if(this.localStorage&&!this.localStorage.isEmpty()){let e=(0,n.qsa)(".jse-hto-action-btn").filter((e=>this.localStorage.existInCollection(String(e.dataset.productCode))));e.length>0&&this.displayButtonRemoveFromHTO(e)}}displayButtonRemoveFromHTO(e){e.forEach((e=>{this.replaceHTOButton(e,"remove")}))}replaceHTOButton(e,t){"remove"===t?(this.showMessages&&this.showHTOMessage(e),this.showHTORemoveButton(e)):"add"===t&&(this.showMessages&&this.hideHtoMessage(e),this.showHTOAddButton(e))}showHTORemoveButton(e){let t=Translator.trans("product.remove_hto_from_cart",{},"products"),o=(0,n.qs)(".hto__btn__name",e);if(o&&(o.innerText=t),e.setAttribute("title",t),e.style.display="flex",e.classList.remove("hto__btn--add"),e.classList.remove("button--black--hollow"),e.classList.remove("button--type--hollow"),e.classList.add("hto__btn--remove"),e.classList.add("button--black"),e.classList.add("button--type"),e.dataset.action="remove",e.dataset.behat="remove-from-hto",!this.isListing){let t=(0,n.sqs)(".js-hto-icon",e);t.classList.remove("icon-add-circle"),t.classList.add("icon-close")}}showHTOAddButton(e){if(!e||void 0===e.dataset.productCode)return;let t=e.dataset.productCode.includes("sun_hto")?"add_hto_sun":"add_hto_to_cart",o=Translator.trans(`product.${t}`,{},"products"),s=(0,n.qs)(".hto__btn__name",e);if(s&&(s.innerText=o),e.setAttribute("title",o),e.style.display="flex",e.classList.remove("hto__btn--remove"),e.classList.remove("button--black"),e.classList.remove("button--type"),e.classList.add("hto__btn--add"),e.classList.add("button--black--hollow"),e.classList.add("button--type--hollow"),e.dataset.action="add",e.dataset.behat="add-to-hto",!this.isListing){let t=(0,n.sqs)(".js-hto-icon",e);t.classList.remove("icon-check-square"),t.classList.add("icon-close")}}showHTOMessage(e){let t=e.parentNode;if(!t||void 0===e.dataset.productCode)return;let o=e.dataset.productCode.includes("sun_hto")?"htosun":"hto";if((0,n.qs)(`.js-${o}-added-to-cart`))return void(0,n.showDOMElement)((0,n.sqs)(`.js-${o}-added-to-cart`));this.hideHtoMessage(e);let s=(0,n.createElement)("p",[`js-${o}-added-to-cart`,"hto-added-to-cart","callout","success"]),r=e.dataset.productCode.includes("sun_hto")?"product.add_message_hto_sun_success":"product.add_message_hto_success";s.innerHTML=Translator.trans(`${r}`,{},"products"),t.insertBefore(s,e)}hideHtoMessage(e){var t;let o=(null===(t=e.dataset.productCode)||void 0===t?void 0:t.includes("sun_hto"))?"htosun":"hto";(0,n.qs)(`.js-${o}-added-to-cart`)&&(0,n.hideDOMElement)((0,n.sqs)(`.js-${o}-added-to-cart`))}replaceHtoList(e){this.localStorage.resetCollection(),e.length>0&&this.localStorage.replaceCollection(e)}static triggerHTOTooltip(e){let t=(0,n.createElement)("span",["has-tip","add-hto-to-message"],[{name:"title",value:Translator.trans("product.add_hto_to_cart",{},"products")}]);e.appendChild(t);let o=new s.Tooltip($(t),{position:"left",alignment:"center",tooltipClass:"tooltip tooltip-hto-add-to-cart"});setTimeout((()=>{o.show()}),600),setTimeout((()=>{o.hide(),(0,n.sqs)(".tooltip-hto-add-to-cart").remove(),t.remove()}),5e3)}constructor(e=(0,n.sqs)("html"),t=r.default.getInstance("htoProductsCodes"),o=new i.default,s=!1){c(this,"localStorage",void 0),c(this,"client",void 0),c(this,"showMessages",void 0),c(this,"offCanvasScreen",void 0),c(this,"isListing",void 0),c(this,"onClickOnHtoButton",void 0),this.localStorage=t,this.client=o,this.showMessages=s,this.offCanvasScreen=null,this.onClickOnHtoButton=e=>{if(e.preventDefault(),!e.currentTarget)return;let t=e.currentTarget;if(t.classList.contains("jss-is-loading"))return;let{action:o,productCode:s}=t.dataset;if(!s)throw Error("No product code for this product");if(t.classList.add("jss-is-loading"),this.isListing||(0,n.hideDOMElement)((0,n.sqs)(".js-hto-icon",t)),(0,n.showDOMElement)((0,n.sqs)(".js-hto-loader",t),"inline-block"),"add"===o)this.addProduct(s,t);else{if("remove"!==o)throw Error("Unknown action");this.removeProduct(s,t)}},(0,n.qsa)(".jse-hto-action-btn",e).forEach((e=>{e.addEventListener("click",this.onClickOnHtoButton)})),this.isListing=null!==(0,n.qs)(".products-listing",e),this.updateHTOButtons(),this.InitializeOffCanvas()}}},25926:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});class o{constructor(e){(function(e,t,o){t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o})(this,"messages",void 0),this.messages=e}}class s{async addProduct(e){let t=Routing.generate("app.route.cart.ajax.add",{productCode:e});return fetch(t,{method:"POST",body:JSON.stringify({quantity:1}),headers:{"Content-Type":"application/json"}}).then((async e=>{if(400===e.status)throw new o((await e.json()).messages);return e.json()}))}async getRenderedProductList(e){let t=Routing.generate("app.route.products_list");return fetch(t,{method:"POST",body:JSON.stringify({productCodes:e}),headers:{"Content-Type":"application/json"}}).then((e=>e.text()))}async removeProduct(e){let t=Routing.generate("app.route.cart.ajax.remove_hto",{productCode:e});return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}}},55181:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});const s=o(80487);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}class a{createScreen(){let e=document.createElement("div");e.classList.add("offcanvas-screen","js-offcanvas-screen"),this.config.fullWidth&&e.classList.add("full-width");let t=(0,s.qsa)(".js-close",this.screenContent)||[];if(this.config.closeButton){let o=(0,s.qs)(".js-close",this.screenHeader);o&&t.push(o),e.appendChild(this.screenHeader),e.classList.add("has-header")}let o=document.createElement("div");return o.classList.add("offcanvas-screen__content"),o.appendChild(this.screenContent),t.forEach((e=>{e.addEventListener("click",(()=>{this.hideScreen()}))})),e.appendChild(o),e}createScreenHeader(){let e=document.createElement("div");e.classList.add("offcanvas-screen__header");let t=document.createElement("button");t.classList.add("close-button","offcanvas-screen__close-button","js-close"),t.setAttribute("type","button");let o=document.createElement("i");return o.classList.add("icon","icon-close"),t.appendChild(o),e.appendChild(t),e}createOverlay(){let e=(0,s.qs)(".js-overlay")||null;return e||!this.config.overlay||((e=document.createElement("div")).classList.add("js-overlay","offcanvas-screen__overlay"),this.config.closableByOverlay&&(e.addEventListener("click",(()=>{this.hideScreen()})),e.classList.add("can-close"))),e}loadAndOpen(){(async()=>{if(this.config.contentUrl&&!this.screenContent.contentLoaded){this.screenContent.contentLoaded=!0;let e=await this.loadContent(this.config.contentUrl);e&&this.screenContent.appendChild(e)}this.openScreen()})()}handleOpenerElement(){this.config.openerElement&&this.config.openerElement.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.loadAndOpen()}))}async openScreen(){return await new window.Lazy({container:this.screenContent,unobserve_entered:!0},void 0),new Promise((e=>{!this.config.fullWidth&&this.overlay&&(0,s.showDOMElement)(this.overlay),this.showScreen(this.screen),(0,s.sqs)(".offcanvas-screen__content").scroll(0,0),this.body.style.overflowY="hidden",e()}))}showScreen(e){(0,s.showDOMElement)(e),console.log(e.offsetHeight),e.classList.add("is-open")}hideScreen(){let{screen:e}=this,t=(0,s.qsa)(".js-offcanvas-screen.is-open");if(t.length<=0)return;t.filter((e=>!e.classList.contains("full-width")));let o=t.filter((e=>!e.classList.contains("full-width")));this.overlay&&o.length<2&&(0,s.hideDOMElement)(this.overlay);let n=this.getOpenScreen(e);n.addEventListener("transitionend",(function e(){(0,s.hideDOMElement)(n),n.removeEventListener("transitionend",e)})),n.classList.remove("is-open"),this.body.style.overflowY="auto"}getOpenScreen(e){return e.classList.contains("is-open")?e:(0,s.sqs)(".js-offcanvas-screen.is-open")}async loadContent(e){return fetch(e,{headers:{method:"POST"}}).then((e=>{if(e.ok)return e.text();throw Error(Translator.trans("brille24.offcanvas_screen.error_message_content_no_loaded",{url:e.url},"errors"))})).then((e=>{let t=(new DOMParser).parseFromString(e,"text/html"),n=(0,s.sqs)(this.cssSelectors.overlayContentSelector,t);try{$(n).foundation()}catch(e){(async()=>{await Promise.resolve().then((()=>function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}return s.default=e,o&&o.set(e,s),s}(o(39281)))),$(n).foundation()})()}return n}))}constructor(e,t){n(this,"screenHeader",void 0),n(this,"screen",void 0),n(this,"overlay",void 0),n(this,"screenContent",void 0),n(this,"body",void 0),n(this,"config",{closeButton:!0,overlay:!0,closableByOverlay:!0,fullWidth:!1,contentUrl:null,customClass:null}),n(this,"cssSelectors",{overlayContentSelector:"#content"}),this.screenContent=e,this.screenContent.contentLoaded=!1,this.config=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},s=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),s.forEach((function(t){n(e,t,o[t])}))}return e}({},this.config,t),this.body=(0,s.sqs)("body"),this.screenHeader=this.createScreenHeader(),this.screen=this.createScreen(),this.overlay=this.createOverlay(),this.body.appendChild(this.screen),this.overlay&&this.body.appendChild(this.overlay),this.handleOpenerElement()}}},20145:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});const s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=a(t);if(o&&o.has(e))return o.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=n?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]}return s.default=e,o&&o.set(e,s),s}(o(51020)),n=o(80487);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}class c{initializeProductsCarouselSwipers(e,t){t.on={init(){new window.Lazy({elements_selector:".js-product-card-img",unobserve_entered:!0})}};let o=(0,n.sqs)(".js-products-carousel-swiper",e);this.validateSwiperComponents(o,t),new s.default(o,i(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},s=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),s.forEach((function(t){r(e,t,o[t])}))}return e}({},t),{modules:[s.Navigation,s.Pagination,s.Autoplay]}))}validateSwiperComponents(e,t){void 0===t.navigation&&((0,n.sqs)(".js-swiper-button-prev",e).classList.add("hide"),(0,n.sqs)(".js-swiper-button-next",e).classList.add("hide")),void 0!==t.pagination&&((0,n.sqs)(".js-swiper-pagination",e).style.display="inline"),(void 0!==t.showPrice||t.showPrice)&&(0,n.qsa)(".js-product-price",e).forEach((e=>{e.classList.add("show-product-price")}))}prepareCarouselProductsSwipersData(){this.productCarouselSections.forEach((e=>{let t=(0,n.sqs)(".js-products-carousel",e),{carouselShowSlides:o=0,carouselScrollSlides:s=0,carouselUrl:r=""}=t.dataset,a={loop:"1"===t.dataset.carouselInfinite,spaceBetween:20,slidesPerView:"auto",slidesPerGroup:1,loopedSlides:3,breakpoints:{640:{spaceBetween:30,slidesPerView:2,slidesPerGroup:2,loopedSlides:null},1024:{spaceBetween:30,slidesPerView:""!==o?parseInt(String(o),10):1,loopedSlides:null,slidesPerGroup:""!==s?parseInt(String(s),10):1}}};"1"===t.dataset.carouselAutoplay&&(a.autoplay={delay:Number(t.dataset.carouselAutoplayTime)}),"1"===t.dataset.carouselShowArrows&&(a.navigation={nextEl:".js-swiper-button-next",prevEl:".js-swiper-button-prev"}),"1"===t.dataset.carouselShowDots&&(a.pagination={el:".swiper-pagination",type:"bullets"}),"1"===t.dataset.carouselShowPrice&&(a.showPrice=!0),document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&fetch(r).then((e=>e.ok?e.text():"")).then((o=>{t.innerHTML=o,this.initializeProductsCarouselSwipers(e,a)}))}))}))}constructor(e=(0,n.qsa)(".js-products-carousel-section")){r(this,"productCarouselSections",void 0),this.productCarouselSections=e,e.length>0&&this.prepareCarouselProductsSwipersData()}}},80582:function(e,t,o){var s;Object.defineProperty(t,"__esModule",{value:!0}),o(87287),new(((s=o(20145))&&s.__esModule?s:{default:s}).default)}}]);